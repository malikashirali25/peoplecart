{% extends 'base.html' %}
{% load static %}

{% block title %}Update Profile - PeopleCart{% endblock %}

{% block content %}
<!-- Header Section -->
<section class="hero-section" style="padding: 3rem 0;">
    <div class="container">
        <div class="hero-content text-center">
            <h1>Update Profile</h1>
            <p>Manage your account information</p>
        </div>
    </div>
</section>

<!-- Update Form Section -->
<section class="section-padding">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-10 col-lg-8">
                <div class="card border-0 shadow-lg">
                    <div class="card-body p-5">
                        <div class="text-center mb-4">
                            <i class="bi bi-person-gear text-primary" style="font-size: 3rem;"></i>
                            <h3 class="mt-3 mb-2">Edit Profile</h3>
                            <p class="text-muted">Update your personal information</p>
                        </div>
                        
                        <form method="POST" action="{% url 'update_user' %}">
                            {% csrf_token %}
                            
                            {% if user_form.errors or profile_form.errors %}
                                <div class="alert alert-danger">
                                    <strong>Please correct the following errors:</strong>
                                    <ul class="mb-0">
                                        {% for field in user_form %}
                                            {% for error in field.errors %}
                                                <li>{{ error }}</li>
                                            {% endfor %}
                                        {% endfor %}
                                        {% for field in profile_form %}
                                            {% for error in field.errors %}
                                                <li>{{ error }}</li>
                                            {% endfor %}
                                        {% endfor %}
                                    </ul>
                                </div>
                            {% endif %}
                            
                            <!-- Personal Information Section -->
                            <div class="mb-4">
                                <h5 class="mb-3 border-bottom pb-2">
                                    <i class="bi bi-person"></i> Personal Information
                                </h5>
                                <div class="mb-3">
                                    <label for="{{ user_form.username.id_for_label }}" class="form-label fw-semibold">Username</label>
                                    {{ user_form.username }}
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ user_form.first_name.id_for_label }}" class="form-label fw-semibold">First Name</label>
                                        {{ user_form.first_name }}
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ user_form.last_name.id_for_label }}" class="form-label fw-semibold">Last Name</label>
                                        {{ user_form.last_name }}
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="{{ user_form.email.id_for_label }}" class="form-label fw-semibold">Email</label>
                                    {{ user_form.email }}
                                </div>
                            </div>
                            
                            <!-- Shipping Address Section -->
                            <div class="mb-4">
                                <h5 class="mb-3 border-bottom pb-2">
                                    <i class="bi bi-geo-alt"></i> Shipping Address
                                </h5>
                                <div class="mb-3">
                                    <label for="{{ profile_form.phone.id_for_label }}" class="form-label fw-semibold">Phone Number</label>
                                    {{ profile_form.phone }}
                                </div>
                                
                                <div class="mb-3">
                                    <label for="{{ profile_form.address1.id_for_label }}" class="form-label fw-semibold">Address Line 1</label>
                                    {{ profile_form.address1 }}
                                </div>
                                
                                <div class="mb-3">
                                    <label for="{{ profile_form.address2.id_for_label }}" class="form-label fw-semibold">Address Line 2 <small class="text-muted">(Optional)</small></label>
                                    {{ profile_form.address2 }}
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ profile_form.city.id_for_label }}" class="form-label fw-semibold">City</label>
                                        {{ profile_form.city }}
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ profile_form.state.id_for_label }}" class="form-label fw-semibold">State/Province</label>
                                        {{ profile_form.state }}
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ profile_form.zipcode.id_for_label }}" class="form-label fw-semibold">Zip/Postal Code</label>
                                        {{ profile_form.zipcode }}
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ profile_form.country.id_for_label }}" class="form-label fw-semibold">Country</label>
                                        {{ profile_form.country }}
                                    </div>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn btn-primary btn-lg w-100 mb-3">
                                <i class="bi bi-check-circle"></i> Update Profile
                            </button>
                        </form>
                        
                        <div class="text-center mt-4">
                            <a href="{% url 'update_password' %}" class="btn btn-outline-primary">
                                <i class="bi bi-key"></i> Change Password
                            </a>
                            <a href="{% url 'home' %}" class="btn btn-outline-secondary ms-2">
                                <i class="bi bi-arrow-left"></i> Back to Home
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
